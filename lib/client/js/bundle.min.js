(function(){var require=function(e,t){var n=require.resolve(e,t||"/"),r=require.modules[n];if(!r)throw new Error("Failed to resolve module "+e+", tried "+n);var i=require.cache[n],s=i?i.exports:r();return s};require.paths=[],require.modules={},require.cache={},require.extensions=[".js",".coffee",".json"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(){return function(e,t){function o(e){e=n.normalize(e);if(require.modules[e])return e;for(var t=0;t<require.extensions.length;t++){var r=require.extensions[t];if(require.modules[e+r])return e+r}}function u(e){e=e.replace(/\/+$/,"");var t=n.normalize(e+"/package.json");if(require.modules[t]){var r=require.modules[t](),i=r.browserify;if(typeof i=="object"&&i.main){var s=o(n.resolve(e,i.main));if(s)return s}else if(typeof i=="string"){var s=o(n.resolve(e,i));if(s)return s}else if(r.main){var s=o(n.resolve(e,r.main));if(s)return s}}return o(e+"/index")}function a(e,t){var n=f(t);for(var r=0;r<n.length;r++){var i=n[r],s=o(i+"/"+e);if(s)return s;var a=u(i+"/"+e);if(a)return a}var s=o(e);if(s)return s}function f(e){var t;e==="/"?t=[""]:t=n.normalize(e).split("/");var r=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";r.push(s)}return r}t||(t="/");if(require._core[e])return e;var n=require.modules.path();t=n.resolve("/",t);var r=t||"/";if(e.match(/^(?:\.\.?\/|\/)/)){var i=o(n.resolve(r,e))||u(n.resolve(r,e));if(i)return i}var s=a(e,r);if(s)return s;throw new Error("Cannot find module '"+e+"'")}}(),require.alias=function(e,t){var n=require.modules.path(),r=null;try{r=require.resolve(e+"/package.json","/")}catch(i){r=require.resolve(e,"/")}var s=n.dirname(r),o=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(require.modules);for(var u=0;u<o.length;u++){var a=o[u];if(a.slice(0,s.length+1)===s+"/"){var f=a.slice(s.length);require.modules[t+f]=require.modules[s+f]}else a===s&&(require.modules[t]=require.modules[s])}},function(){var e={};require.define=function(t,n){require.modules.__browserify_process&&(e=require.modules.__browserify_process());var r=require._core[t]?"":require.modules.path().dirname(t),i=function(e){var t=require(e,r),n=require.cache[require.resolve(e,r)];return n&&n.parent===null&&(n.parent=s),t};i.resolve=function(e){return require.resolve(e,r)},i.modules=require.modules,i.define=require.define,i.cache=require.cache;var s={id:t,filename:t,exports:{},loaded:!1,parent:null};require.modules[t]=function(){return require.cache[t]=s,n.call(s.exports,i,s,s.exports,r,t,e),s.loaded=!0,s.exports}}}(),require.define("path",function(e,t,n,r,i,s){function o(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function u(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var a=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:s.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=u(o(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=u(o(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(o(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=a.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=a.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return a.exec(e)[3]||""}}),require.define("__browserify_process",function(e,t,n,r,i,s){var s=t.exports={};s.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return window.setImmediate;if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&e.data==="browserify-tick"){e.stopPropagation();if(n.length>0){var t=n.shift();t()}}},!0),function(t){n.push(t),window.postMessage("browserify-tick","*")}}return function(t){setTimeout(t,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.binding=function(t){if(t==="evals")return e("vm");throw new Error("No such module. (Possibly not yet loaded)")},function(){var t="/",n;s.cwd=function(){return t},s.chdir=function(r){n||(n=e("path")),t=n.resolve(r,t)}}()}),require.define("/node_modules/signals/package.json",function(e,t,n,r,i,s){t.exports={main:"dist/signals.js"}}),require.define("/node_modules/signals/dist/signals.js",function(e,t,n,r,i,s){(function(e){function n(e,t,n,r,i){this._listener=t,this._isOnce=n,this.context=r,this._signal=e,this._priority=i||0}function r(e,t){if(typeof e!="function")throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function i(){this._bindings=[],this._prevParams=null}n.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&!!this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},i.prototype={VERSION:"0.8.1",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,t,r,i){var s=this._indexOfListener(e,r),o;if(s!==-1){o=this._bindings[s];if(o.isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else o=new n(this,e,t,r,i),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){var n=this._bindings.length,r;while(n--){r=this._bindings[n];if(r._listener===e&&r.context===t)return n}return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,t,n){return r(e,"add"),this._registerListener(e,!1,t,n)},addOnce:function(e,t,n){return r(e,"addOnce"),this._registerListener(e,!0,t,n)},remove:function(e,t){r(e,"remove");var n=this._indexOfListener(e,t);return n!==-1&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),e},removeAll:function(){var e=this._bindings.length;while(e--)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(!this.active)return;var t=Array.prototype.slice.call(arguments),n=this._bindings.length,r;this.memorize&&(this._prevParams=t);if(!n)return;r=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(r[n]&&this._shouldPropagate&&r[n].execute(t)!==!1)},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var s=i;s.Signal=i,typeof define=="function"&&define.amd?define(function(){return s}):typeof t!="undefined"&&t.exports?t.exports=s:e.signals=s})(this)}),require.define("/node_modules/dlite-jsonp/package.json",function(e,t,n,r,i,s){t.exports={main:"index.js"}}),require.define("/node_modules/dlite-jsonp/index.js",function(e,t,n,r,i,s){t.exports=function(e,t){var n="j"+(Math.random()*(1<<30)).toString(16).replace(".",""),r=document.createElement("script");window._jsonp_callbacks[n]=function(e){t&&t(e),delete window._jsonp_callbacks[n],r.parentNode.removeChild(r)},r.src=e.replace("callback=%3F","callback=_jsonp_callbacks."+n),document.getElementsByTagName("head")[0].appendChild(r)},window._jsonp_callbacks={}}),require.define("/node_modules/store/package.json",function(e,t,n,r,i,s){t.exports={main:"store"}}),require.define("/node_modules/store/store.js",function(e,t,n,r,i,s){(function(){function a(){try{return i in n&&n[i]}catch(e){return!1}}function f(){try{return s in n&&n[s]&&n[s][n.location.hostname]}catch(e){return!1}}var e={},n=window,r=n.document,i="localStorage",s="globalStorage",o="__storejs__",u;e.disabled=!1,e.set=function(e,t){},e.get=function(e){},e.remove=function(e){},e.clear=function(){},e.transact=function(t,n,r){var i=e.get(t);r==null&&(r=n,n=null),typeof i=="undefined"&&(i=n||{}),r(i),e.set(t,i)},e.getAll=function(){},e.serialize=function(e){return JSON.stringify(e)},e.deserialize=function(e){return typeof e!="string"?undefined:JSON.parse(e)};if(a())u=n[i],e.set=function(t,n){if(n===undefined)return e.remove(t);u.setItem(t,e.serialize(n))},e.get=function(t){return e.deserialize(u.getItem(t))},e.remove=function(e){u.removeItem(e)},e.clear=function(){u.clear()},e.getAll=function(){var t={};for(var n=0;n<u.length;++n){var r=u.key(n);t[r]=e.get(r)}return t};else if(f())u=n[s][n.location.hostname],e.set=function(t,n){if(n===undefined)return e.remove(t);u[t]=e.serialize(n)},e.get=function(t){return e.deserialize(u[t]&&u[t].value)},e.remove=function(e){delete u[e]},e.clear=function(){for(var e in u)delete u[e]},e.getAll=function(){var t={};for(var n=0;n<u.length;++n){var r=u.key(n);t[r]=e.get(r)}return t};else if(r.documentElement.addBehavior){var l,c;try{c=new ActiveXObject("htmlfile"),c.open(),c.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),c.close(),l=c.w.frames[0].document,u=l.createElement("div")}catch(h){u=r.createElement("div"),l=r.body}function p(t){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(u),l.appendChild(u),u.addBehavior("#default#userData"),u.load(i);var r=t.apply(e,n);return l.removeChild(u),r}}function d(e){return"_"+e}e.set=p(function(t,n,r){n=d(n);if(r===undefined)return e.remove(n);t.setAttribute(n,e.serialize(r)),t.save(i)}),e.get=p(function(t,n){return n=d(n),e.deserialize(t.getAttribute(n))}),e.remove=p(function(e,t){t=d(t),e.removeAttribute(t),e.save(i)}),e.clear=p(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=0,r;r=t[n];n++)e.removeAttribute(r.name);e.save(i)}),e.getAll=p(function(t){var n=t.XMLDocument.documentElement.attributes;t.load(i);var r={};for(var s=0,o;o=n[s];++s)r[o]=e.get(o);return r})}try{e.set(o,o),e.get(o)!=o&&(e.disabled=!0),e.remove(o)}catch(h){e.disabled=!0}typeof t!="undefined"?t.exports=e:typeof define=="function"&&define.amd?define(e):this.store=e})()}),require.define("/node_modules/socket.io-client/package.json",function(e,t,n,r,i,s){t.exports={main:"./lib/io.js",browserify:"./dist/socket.io.js"}}),require.define("/node_modules/socket.io-client/dist/socket.io.js",function(require,module,exports,__dirname,__filename,process){var io="undefined"==typeof module?{}:module.exports;(function(){(function(e,t){var n=e;n.version="0.9.10",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var i=n.util.parseUri(e),s,o;t&&t.location&&(i.protocol=i.protocol||t.location.protocol.slice(0,-1),i.host=i.host||(t.document?t.document.domain:t.location.hostname),i.port=i.port||t.location.port),s=n.util.uniqueUri(i);var u={host:i.host,secure:"https"==i.protocol,port:i.port||("https"==i.protocol?443:80),query:i.query||""};n.util.merge(u,r);if(u["force new connection"]||!n.sockets[s])o=new n.Socket(u);return!u["force new connection"]&&o&&(n.sockets[s]=o),o=o||n.sockets[s],o.of(i.path.length>1?i.path:"")}})("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){var t=r.exec(e||""),n={},s=14;while(s--)n[i[s]]=t[s]||"";return n},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port;return"document"in t?(r=r||document.domain,i=i||(n=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(r=r||"localhost",!i&&n=="https"&&(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[];n.merge(r,n.chunkQuery(t||""));for(var s in r)r.hasOwnProperty(s)&&i.push(s+"="+r[s]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){var t={},n=e.split("&"),r=0,i=n.length,s;for(;r<i;++r)s=n[r].split("="),s[0]&&(t[s[0]]=s[1]);return t};var s=!1;n.load=function(e){if("document"in t&&document.readyState==="complete"||s)return e();n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){s=!0}),n.defer=function(e){if(!n.ua.webkit||"undefined"!=typeof importScripts)return e();n.load(function(){setTimeout(e,100)})},n.merge=function(t,r,i,s){var o=s||[],u=typeof i=="undefined"?2:i,a;for(a in r)r.hasOwnProperty(a)&&n.indexOf(o,a)<0&&(typeof t[a]!="object"||!u?(t[a]=r[a],o.push(r[a])):n.merge(t[a],r[a],u-1,o));return t},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},n.intersect=function(e,t){var r=[],i=e.length>t.length?e:t,s=e.length>t.length?t:e;for(var o=0,u=s.length;o<u;o++)~n.indexOf(i,s[o])&&r.push(s[o]);return r},n.indexOf=function(e,t,n){for(var r=e.length,n=n<0?n+r<0?0:n+r:n||0;n<r&&e[n]!==t;n++);return r<=n?-1:n},n.toArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function r(){n.removeListener(e,r),t.apply(this,arguments)}var n=this;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var r=this.$events[e];if(t.util.isArray(r)){var i=-1;for(var s=0,o=r.length;s<o;s++)if(r[s]===n||r[s].listener&&r[s].listener===n){i=s;break}if(i<0)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return e===undefined?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;var i=n.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a instanceof Date&&(a=date(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,typeof JSON!="undefined"?JSON:undefined),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],s=n.advice=["reconnect"],o=t.JSON,u=t.util.indexOf;n.encodePacket=function(e){var t=u(r,e.type),n=e.id||"",a=e.endpoint||"",f=e.ack,l=null;switch(e.type){case"error":var c=e.reason?u(i,e.reason):"",h=e.advice?u(s,e.advice):"";if(c!==""||h!=="")l=c+(h!==""?"+"+h:"");break;case"message":e.data!==""&&(l=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),l=o.stringify(p);break;case"json":l=o.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+o.stringify(e.args):"")}var d=[t,n+(f=="data"?"+":""),a];return l!==null&&l!==undefined&&d.push(l),d.join(":")},n.encodePayload=function(e){var t="";if(e.length==1)return e[0];for(var n=0,r=e.length;n<r;n++){var i=e[n];t+="�"+i.length+"�"+e[n]}return t};var a=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(a);if(!t)return{};var n=t[2]||"",e=t[5]||"",u={type:r[t[1]],endpoint:t[4]||""};n&&(u.id=n,t[3]?u.ack="data":u.ack=!0);switch(u.type){case"error":var t=e.split("+");u.reason=i[t[0]]||"",u.advice=s[t[1]]||"";break;case"message":u.data=e||"";break;case"event":try{var f=o.parse(e);u.name=f.name,u.args=f.args}catch(l){}u.args=u.args||[];break;case"json":try{u.data=o.parse(e)}catch(l){}break;case"connect":u.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t){u.ackId=t[1],u.args=[];if(t[3])try{u.args=t[3]?o.parse(t[3]):[]}catch(l){}}break;case"disconnect":case"heartbeat":}return u},n.decodePayload=function(e){if(e.charAt(0)=="�"){var t=[];for(var r=1,i="";r<e.length;r++)e.charAt(r)=="�"?(t.push(n.decodePacket(e.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=e.charAt(r);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(e!==""){var n=t.parser.decodePayload(e);if(n&&n.length)for(var r=0,i=n.length;r<i;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),e.type=="heartbeat"?this.onHeartbeat():(e.type=="connect"&&e.endpoint==""&&this.onConnect(),e.type=="error"&&e.advice=="reconnect"&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){var e=this;this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),e!==""&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},r.prototype.handshake=function(e){function s(t){t instanceof Error?(n.connecting=!1,n.onError(t.message)):e.apply(null,t.split(":"))}var n=this,r=this.options,o=["http"+(r.secure?"s":"")+":/",r.host+":"+r.port,r.resource,t.protocol,t.util.query(this.options.query,"t="+ +(new Date))].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var u=document.getElementsByTagName("script")[0],a=document.createElement("script");a.src=o+"&jsonp="+t.j.length,u.parentNode.insertBefore(a,u),t.j.push(function(e){s(e),a.parentNode.removeChild(a)})}else{var f=t.util.request();f.open("GET",o,!0),this.isXDomain()&&(f.withCredentials=!0),f.onreadystatechange=function(){f.readyState==4&&(f.onreadystatechange=i,f.status==200?s(f.responseText):f.status==403?n.onError(f.responseText):(n.connecting=!1,!n.reconnecting&&n.onError(f.responseText)))},f.send(null)}},r.prototype.getTransport=function(e){var n=e||this.transports,r;for(var i=0,s;s=n[i];i++)if(t.Transport[s]&&t.Transport[s].check(this)&&(!this.isXDomain()||t.Transport[s].xdomainCheck(this)))return new t.Transport[s](this,this.sessionid);return null},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(r,i,s,o){function u(e){n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e);if(!n.transport)return n.publish("connect_failed");n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected){n.connecting=!1;if(n.options["try multiple transports"]){var e=n.transports;while(e.length>0&&e.splice(0,1)[0]!=n.transport.name);e.length?u(e):n.publish("connect_failed")}}},n.options["connect timeout"]))})}n.sessionid=r,n.closeTimeout=s*1e3,n.heartbeatTimeout=i*1e3,n.transports||(n.transports=n.origTransports=o?t.util.intersect(o.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),u(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&typeof e=="function"&&e()})}),this},r.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(this.transport&&!this.transport.heartbeats())return;var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},r.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},r.prototype.disconnect=function(){if(this.connected||this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&e.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1;if(t||n)this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect())},r.prototype.reconnect=function(){function i(){if(e.connected){for(var t in e.namespaces)e.namespaces.hasOwnProperty(t)&&""!==t&&e.namespaces[t].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}clearTimeout(e.reconnectionTimer),e.removeListener("connect_failed",s),e.removeListener("connect",s),e.reconnecting=!1,delete e.reconnectionAttempts,delete e.reconnectionDelay,delete e.reconnectionTimer,delete e.redoTransports,e.options["try multiple transports"]=n}function s(){if(!e.reconnecting)return;if(e.connected)return i();if(e.connecting&&e.reconnecting)return e.reconnectionTimer=setTimeout(s,1e3);e.reconnectionAttempts++>=t?e.redoTransports?(e.publish("reconnect_failed"),i()):(e.on("connect_failed",s),e.options["try multiple transports"]=!0,e.transports=e.origTransports,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<r&&(e.reconnectionDelay*=2),e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(s,e.reconnectionDelay))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],n=this.options["try multiple transports"],r=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(s,this.reconnectionDelay),this.on("connect",s)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function r(){n.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var n=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];e.ack=="data"?i.push(r):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);e.ack=="data"&&i.push(r),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):e.reason=="unauthorized"?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e=t.util.query(this.socket.options.query),r=this,i;return i||(i=n.MozWebSocket||n.WebSocket),this.websocket=new i(this.prepareUrl()+e),this.websocket.onopen=function(){r.onOpen(),r.socket.setBuffer(!1)},this.websocket.onmessage=function(e){r.onData(e.data)},this.websocket.onclose=function(){r.onClose(),r.socket.setBuffer(!0)},this.websocket.onerror=function(e){r.onError(e)},this},t.util.ua.iDevice?r.prototype.send=function(e){var t=this;return setTimeout(function(
){t.websocket.send(e)},0),this}:r.prototype.send=function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,r){function i(){var t=e.options,i=t["flash policy port"],o=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||(typeof WEB_SOCKET_SWF_LOCATION=="undefined"&&(WEB_SOCKET_SWF_LOCATION=o.join("/")),i!==843&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+i),WebSocket.__initialize(),n.loaded=!0),r.call(s)}var s=this;if(document.body)return i();t.util.load(i)},n.check=function(){return typeof WebSocket!="undefined"&&"__initialize"in WebSocket&&!!swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},n.xdomainCheck=function(){return!0},typeof window!="undefined"&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window)var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?["Active"].concat("").join("X"):"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u[["Active"].concat("Object").join("X")]!=e)try{var y=new(window[["Active"].concat("Object").join("X")])(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();(function(){if("undefined"==typeof window||window.WebSocket)return;var e=window.console;if(!e||!e.log||!e.error)e={log:function(){},error:function(){}};if(!swfobject.hasFlashPlayerVersion("10.0.0")){e.error("Flash Player >= 10.0.0 is required.");return}location.protocol=="file:"&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,r,i){var s=this;s.__id=WebSocket.__nextId++,WebSocket.__instances[s.__id]=s,s.readyState=WebSocket.CONNECTING,s.bufferedAmount=0,s.__events={},t?typeof t=="string"&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(s.__id,e,t,n||null,r||0,i||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0?!0:(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING)return;this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)},WebSocket.prototype.addEventListener=function(e,t,n){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,n){if(!(e in this.__events))return;var r=this.__events[e];for(var i=r.length-1;i>=0;--i)if(r[i]===t){r.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){var t=this.__events[e.type]||[];for(var n=0;n<t.length;++n)t[n](e);var r=this["on"+e.type];r&&r(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if(e.type=="open"||e.type=="error")t=this.__createSimpleEvent(e.type);else if(e.type=="close")t=this.__createSimpleEvent("close");else{if(e.type!="message")throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(WebSocket.__flash)return;WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation);if(!window.WEB_SOCKET_SWF_LOCATION){e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{var t=WebSocket.__flash.receiveEvents();for(var n=0;n<t.length;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(r){e.error(r)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!e||!e.enabledPlugin||!e.enabledPlugin.filename?!1:e.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))})(),function(e,t,n){function r(e){if(!e)return;t.Transport.apply(this,arguments),this.sendBuffer=[]}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){var n=[];for(var r=0,i=e.length;r<i;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){function r(){this.readyState==4&&(this.onreadystatechange=i,t.posting=!1,this.status==200?t.socket.setBuffer(!1):t.onClose())}function s(){this.onload=i,t.socket.setBuffer(!1)}var t=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=s:this.sendXHR.onreadystatechange=r,this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +(new Date));n.open(e||"GET",this.prepareUrl()+r,!0);if(e=="POST")try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(i){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,r){try{var i=t.util.request(r),s=n.XDomainRequest&&i instanceof XDomainRequest,o=e&&e.options&&e.options.secure?"https:":"http:",u=o!=n.location.protocol;if(i&&(!s||!u))return!0}catch(a){}return!1},r.xdomainCheck=function(e){return r.check(e,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date));this.iframe.src=this.prepareUrl()+r,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(r){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(e){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window)try{var n=new(window[["Active"].concat("Object").join("X")])("htmlfile");return n&&t.Transport.XHR.check(e)}catch(r){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.heartbeats=function(){return!1},r.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},r.prototype.get=function(){function t(){this.readyState==4&&(this.onreadystatechange=i,this.status==200?(e.onData(this.responseText),e.get()):e.onClose())}function r(){this.onload=i,this.onerror=i,e.onData(this.responseText),e.get()}function s(){e.onClose()}if(!this.isOpen)return;var e=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=r,this.xhr.onerror=s):this.xhr.onreadystatechange=t,this.xhr.send(null)},r.prototype.onClose=function(){t.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer(function(){n.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function i(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}var r=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=i,t.util.inherit(i,t.Transport["xhr-polling"]),i.prototype.name="jsonp-polling",i.prototype.post=function(e){function a(){f(),n.socket.setBuffer(!1)}function f(){n.iframe&&n.form.removeChild(n.iframe);try{u=document.createElement('<iframe name="'+n.iframeId+'">')}catch(e){u=document.createElement("iframe"),u.name=n.iframeId}u.id=n.iframeId,n.form.appendChild(u),n.iframe=u}var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);if(!this.form){var i=document.createElement("form"),s=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index,u;i.className="socketio",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.display="none",i.target=o,i.method="POST",i.setAttribute("accept-charset","utf-8"),s.name="d",i.appendChild(s),document.body.appendChild(i),this.form=i,this.area=s}this.form.action=this.prepareUrl()+r,f(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(l){}this.iframe.attachEvent?u.onreadystatechange=function(){n.iframe.readyState=="complete"&&a()}:this.iframe.onload=a,this.socket.setBuffer(!0)},i.prototype.get=function(){var e=this,n=document.createElement("script"),i=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+i,n.onerror=function(){e.onClose()};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s),this.script=n,r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype._=function(e){return this.onData(e),this.isOpen&&this.get(),this},i.prototype.ready=function(e,n){var i=this;if(!r)return n.call(this);t.util.load(function(){n.call(i)})},i.check=function(){return"document"in n},i.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this)})()}),require.define("/node_modules/tinycon/package.json",function(e,t,n,r,i,s){t.exports={}}),require.define("/node_modules/tinycon/tinycon.js",function(e,t,n,r,i,s){(function(){var e={},n=null,r=null,i=document.title,s=null,o=null,u={},a={width:7,height:9,font:"10px arial",colour:"#ffffff",background:"#F03D25",fallback:!0},f=function(){var e=navigator.userAgent.toLowerCase();return function(t){return e.indexOf(t)!==-1}}(),l={ie:f("msie"),chrome:f("chrome"),webkit:f("chrome")||f("safari"),safari:f("safari")&&!f("chrome"),mozilla:f("mozilla")&&!f("chrome")&&!f("safari")},c=function(){var e=document.getElementsByTagName("link");for(var t=0,n=e.length;t<n;t++)if((e[t].getAttribute("rel")||"").match(/\bicon\b/))return e[t];return!1},h=function(){var e=document.getElementsByTagName("link"),t=document.getElementsByTagName("head")[0];for(var n=0,r=e.length;n<r;n++){var i=typeof e[n]!="undefined";i&&e[n].getAttribute("rel")==="icon"&&t.removeChild(e[n])}},p=function(){if(!r||!n){var e=c();r=n=e?e.getAttribute("href"):"/favicon.ico"}return n},d=function(){return o||(o=document.createElement("canvas"),o.width=16,o.height=16),o},v=function(e){h();var t=document.createElement("link");t.type="image/x-icon",t.rel="icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},m=function(e){window.console&&window.console.log(e)},g=function(e,t){if(!d().getContext||l.ie||l.safari||u.fallback==="force")return y(e);var n=d().getContext("2d"),t=t||"#000000",e=e||0,r=p();s=new Image,s.onload=function(){n.clearRect(0,0,16,16),n.drawImage(s,0,0,s.width,s.height,0,0,16,16),e>0&&b(n,e,t),w()},r.match(/^data/)||(s.crossOrigin="anonymous"),s.src=r},y=function(e){u.fallback&&(e>0?document.title="("+e+") "+i:document.title=i)},b=function(e,t,n){var r=(t+"").length-1,i=u.width+6*r,s=16-i,o=16-u.height;e.font=(l.webkit?"bold ":"")+u.font,e.fillStyle=u.background,e.strokeStyle=u.background,e.lineWidth=1,e.fillRect(s,o,i-1,u.height),e.beginPath(),e.moveTo(s-.5,o+1),e.lineTo(s-.5,15),e.stroke(),e.beginPath(),e.moveTo(15.5,o+1),e.lineTo(15.5,15),e.stroke(),e.beginPath(),e.strokeStyle="rgba(0,0,0,0.3)",e.moveTo(s,16),e.lineTo(15,16),e.stroke(),e.fillStyle=u.colour,e.textAlign="right",e.textBaseline="top",e.fillText(t,15,l.mozilla?7:6)},w=function(){if(!d().getContext)return;v(d().toDataURL())};e.setOptions=function(e){u={};for(var t in a)u[t]=e.hasOwnProperty(t)?e[t]:a[t];return this},e.setImage=function(e){return n=e,w(),this},e.setBubble=function(e,t){return isNaN(parseFloat(e))||!isFinite(e)?m("Bubble must be a number"):(g(e,t),this)},e.reset=function(){e.setImage(r)},e.setOptions(a),t.exports=e})()}),require.define("/lib/client/js/client.js",function(e,t,n,r,i,s){(function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w={}.hasOwnProperty,E=function(e,t){function r(){this.constructor=e}for(var n in t)w.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},S=function(e,t){return function(){return e.apply(t,arguments)}};l=function(){function e(){}return e.prototype.add_class=function(e){return this.node.className+=" "+e},e.prototype.remove_class=function(e){return this.node.className=this.node.className.split(e).join("")},e.prototype.has_class=function(e){return this.node.className.indexOf(e)!==-1},e.prototype.toggle_class=function(e){return this.has_class(e)?this.remove_class(e):this.add_class(e)},e}(),g=e("signals"),u=function(e){function t(e,n){this.url=t.html_decode(e),this.message=n}return E(t,e),t.prototype.has_zoomer=!0,t.prototype.build=function(){var e;return this.node=document.createElement("div"),this.node.className="media",this.message.content_node.appendChild(this.node),this.message.set_media(this),e=this.build_media(),this.node.appendChild(e),this.has_zoomer&&this.build_zoomer(),t.item_loaded.dispatch(this),this.node},t.prototype.build_zoomer=function(){var e=this;return this.zoomer=document.createElement("button"),this.zoomer.className="zoomer",this.zoomer.innerHTML="+",this.node.appendChild(this.zoomer),this.zoomer.addEventListener("click",function(){return e.has_class("zoomed")?e.unzoom():e.zoom(),e.toggle_class("zoomed")})},t.types=[],t.add_type=function(e){return this.types.push(e)},t.match=function(e){var t,n,r,i,s;e=this.html_decode(e),i=this.types,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.is_match(e)&&s.push(t);return s},t.build=function(e,t){var n,r;return r=this.match(e),r.length===0?null:(n=r[0],n=new n(e,t),n.start())},t.item_loaded=new g.Signal,t.decode_node=document.createElement("div"),t.html_decode=function(e){return this.decode_node.innerHTML=e,this.decode_node.innerHTML},t}(l),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return E(t,e),t.prototype.has_zoomer=!1,t.prototype.start=function(){return this.build()},t.prototype.build_media=function(){return this.node.className+=" audio",this.player=new r(this.url),this.node.appendChild(this.player.node),this.player.node},t.is_match=function(e){return!!e.match(/\/[^\/]+\.(mp3|aac|wav|mp2|ogg)(\?.*)?$/i)},t}(u),u.add_type(n),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return E(t,e),t.prototype.start=function(){var e=this;return this.img=new Image,this.img.src=this.url,this.img.loaded?this.build():this.img.addEventListener("load",function(){return e.build()})},t.prototype.build_media=function(){var e=this;return this.original_width=this.img.width,this.node.className+=" image",this.link_node=document.createElement("a"),this.link_node.href=this.url,this.link_node.target="_blank",this.link_node.appendChild(this.img),setTimeout(function(){var t;return t=window.getComputedStyle(e.img),e.small_width=parseInt(t.width),e.unzoom()},1),this.link_node},t.prototype.zoom=function(){return this.zoomer.style.left=this.original_width-20+"px",this.zoomer.style.right="auto"},t.prototype.unzoom=function(){var e;return e=this.small_width>20?this.small_width:20,this.zoomer.style.left=this.small_width-20+"px",this.zoomer.style.right="auto"},t.is_match=function(e){return!!e.match(/\/[^\/]+\.(png|jpg|jpeg|gif)(\?.*)?$/i)},t}(u),u.add_type(o),m=e("dlite-jsonp"),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return E(t,e),t.regex=/https?:\/\/\w{0,3}.?twitter+\.\w{2,3}\/.+\/status\/(\d{18})/,t.prototype.has_zoomer=!1,t.prototype.start=function(){return this.build()},t.prototype.build_media=function(){var e,n=this;return this.node.className+=" twitter not_zoomable",e=this.url.match(t.regex),this.container=document.createElement("div"),e?(this.tweet_id=e[1],m("//api.twitter.com/1/statuses/oembed.json?id="+this.tweet_id+"&include_entities=true&omit_script=true&callback=%3F",function(e){return n.container.innerHTML=e.html,u.item_loaded.dispatch(n)}),this.container):this.container},t.prototype.zoom=function(){},t.prototype.unzoom=function(){},t.is_match=function(e){return!!e.match(this.regex)},t}(u),u.add_type(c),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return E(t,e),t.regex=/http:\/\/\w{0,3}.?youtube+\.\w{2,3}\/watch\?.*v=([\w-]{11})(\&.*)?/,t.prototype.start=function(){return this.build()},t.prototype.build_media=function(){var e;return this.node.className+=" youtube",e=this.url.match(t.regex),this.iframe=document.createElement("iframe"),e?(this.video_id=e[1],this.iframe.type="text/html",this.iframe.src="http://www.youtube.com/embed/"+this.video_id+"?wmode=opaque",this.iframe):this.iframe},t.prototype.zoom=function(){},t.prototype.unzoom=function(){},t.is_match=function(e){return!!e.match(this.regex)},t}(u),u.add_type(p),y=e("store"),v=e("socket.io-client"),t=function(){function e(){var e=this;this.node=document.body,this.socket=v.connect(),this.socket.on("connect",function(){if(!e.started)return e.started=!0,e.start()})}return e.prototype.start=function(){var e=this;return this.message_list=new f(this.socket,this.get_options()),this.entry_form=new i(this.socket,this.get_options().name),this.socket.emit("create_session",this.get_options(),function(t){return e.set_option("token",t.token),e.set_option("color",t.color),e.build(),e.attach_signals()})},e.prototype.build=function(){return this.node.appendChild(this.message_list.node),this.node.appendChild(this.entry_form.node),this.focus(),this.entry_form.set_color(this.get_options().color),this.entry_form.set_token(this.get_options().token)},e.prototype.attach_signals=function(){var e=this;return this.entry_form.message_submitted.add(function(t,n){var r;return r=a.build(t,e.get_options(),e.socket,n),r.send()}),this.entry_form.name_changed.add(function(t){return e.set_option("name",t)})},e.prototype.focus=function(){return this.entry_form.focus()},e.prototype.get_options=function(){return this.options?this.options:this.options={name:y.get("name"),color:y.get("color"),token:y.get("token")}},e.prototype.set_option=function(e,t){return y.set(e,t),this.get_options()[e]=t},e.start=function(){return d.app=new e},e}(),d=this,window.addEventListener?addEventListener("DOMContentLoaded",t.start):attachEvent("onload",t.start),g=e("signals"),s=function(){function e(){this.build(),this.attach_events(),this.filters={}}return e.prototype.build=function(){var e,t,n,r,i,s,o,u;return this.node=document.createElement("div"),this.node.id="filter_pane",e=document.createElement("fieldset"),this.node.appendChild(e),s=document.createElement("legend"),s.innerHTML="Filters",e.appendChild(s),r=document.createElement("div"),r.className="field keyword",e.appendChild(r),i=document.createElement("label"),i.innerHTML="Keyword",i["for"]="keyword",r.appendChild(i),this.keyword=document.createElement("input"),this.keyword.id="keyword",this.keyword.type="text",r.appendChild(this.keyword),t=document.createElement("div"),t.className="field show_joinpart",e.appendChild(t),n=document.createElement
("label"),n.innerHTML="Show join / part messages",n["for"]="show_joinpart",t.appendChild(n),this.show_joinpart=document.createElement("input"),this.show_joinpart.id="show_joinpart",this.show_joinpart.value=!0,this.show_joinpart.checked=!1,this.show_joinpart.type="checkbox",t.appendChild(this.show_joinpart),o=document.createElement("div"),o.className="field mediaonly",e.appendChild(o),u=document.createElement("label"),u.innerHTML="With Media Only",u["for"]="mediaonly",o.appendChild(u),this.mediaonly=document.createElement("input"),this.mediaonly.id="mediaonly",this.mediaonly.value=!0,this.mediaonly.checked=!1,this.mediaonly.type="checkbox",o.appendChild(this.mediaonly)},e.prototype.attach_events=function(){var e=this;return this.show_joinpart.addEventListener("change",function(){return e.set_option("show_joinpart",e.show_joinpart.checked)}),this.keyword.addEventListener("change",function(){var t;return t=e.keyword.value.split(/\s+/),t[0]===""&&(t=[]),e.set_option("keywords",t)}),this.mediaonly.addEventListener("change",function(){return e.set_option("mediaonly",e.mediaonly.checked)})},e.prototype.change=function(){return this.changed.dispatch(this.get_filters())},e.prototype.get_filters=function(){return this.filters},e.prototype.set_option=function(e,t){return this.filters[e]=t,this.change()},e.prototype.changed=new g.Signal,e}(),g=e("signals"),h=function(){function e(e,t){this.socket=t,this.drop_target=e,this.build(),this.attach_events(),this.windowUrl=window.URL||window.webkitURL}return e.prototype.build=function(){return this.node=document.createElement("div"),this.node.className="uploader",this.name_node=document.createElement("p"),this.name_node.className="name",this.size_node=document.createElement("p"),this.size_node.className="size",this.preview_icon=new Image,this.preview_icon.className="preview_icon",this.node.appendChild(this.preview_icon),this.cancel_btn=document.createElement("button"),this.cancel_btn.innerHTML="X",this.file_input=document.createElement("input"),this.file_input.type="file",this.file_input.accept="image/*,audio/*",this.file_input.multiple="",this.select_button=document.createElement("div"),this.select_button.id="upload_select_button",this.select_button_node=document.createElement("button"),this.select_button_node.innerHTML="...",this.select_button.appendChild(this.file_input),this.select_button.appendChild(this.select_button_node),this.select_button.className="select_file section",this.progress_bar=document.createElement("progress"),this.progress_bar.setAttribute("min",0),this.progress_bar.setAttribute("max",100),this.progress_bar.setAttribute("value",0),this.progress_bar.className="upload_progress_bar",this.node.appendChild(this.cancel_btn),this.node.appendChild(this.name_node),this.node.appendChild(this.size_node)},e.prototype.attach_events=function(){var e=this;return this.drop_target.addEventListener("dragenter",function(e){return e.preventDefault(),e.stopPropagation()}),this.drop_target.addEventListener("dragover",function(e){return e.preventDefault(),e.stopPropagation()}),this.drop_target.addEventListener("drop",function(t){var n,r,i,s;t.preventDefault(),t.stopPropagation(),n=t.dataTransfer,i=n.files,r=i[0];if(r)return e.set_selected_file(r);if((s=n.getData("text/uri-list"))&&typeof s=="string")return e.add_selected_uri(s)}),this.cancel_btn.addEventListener("click",function(t){return e.clear()}),this.select_button_node.addEventListener("click",function(t){return e.file_input.click()}),this.file_input.addEventListener("change",function(t){var n;return n=e.file_input.files[0],n?e.set_selected_file(n):!1})},e.prototype.valid_file=function(e){return e&&e.type.match(/^(image)|(audio)\//)},e.prototype.set_selected_file=function(e){return this.valid_file(e)?(this.windowUrl&&(this.preview_icon.src=this.windowUrl.createObjectURL(e)),this.selected_file=e,this.file_selected.dispatch(e),this.name_node.innerHTML=e.name,this.size_node.innerHTML=(e.size/1024).toFixed(2)+"KB"):!1},e.prototype.add_selected_uri=function(e){return this.uri_added.dispatch(e)},e.prototype.set_token=function(e){return this.token=e},e.prototype.start=function(){return this.progress_bar.style.display="block",this.started.dispatch()},e.prototype.clear=function(){return this.selected_file=null,this.progress_bar.value=0,this.progress_bar.style.display="none",this.cleared.dispatch()},e.prototype.stop=function(){return this.progress_bar.value=0,this.progress_bar.style.display="none",this.stopped.dispatch()},e.prototype.upload=function(){var e,t,n=this;return this.selected_file?(e=new FormData,e.append("image",this.selected_file),t=new XMLHttpRequest,t.onreadystatechange=function(e){var r;if(t.readyState>=3&&t.status&&t.status>=400)return r=JSON.parse(t.responseText),n.error.dispatch(r),n.stop()},t.upload.addEventListener("progress",function(e){var t;return t=e.loaded/e.totalSize*100,console.log(e,t),t===100?n.progress_bar.removeAttribute("value"):n.progress_bar.setAttribute("value",t)}),t.addEventListener("load",function(e){var r;n.progress_bar.removeAttribute("value");if(t.status===200)return r=JSON.parse(t.responseText),n.completed.dispatch(r.path),n.clear();if(t.status<=400||t.status<200)return r=JSON.parse(t.responseText),n.error.dispatch(r),n.stop()}),t.addEventListener("error",function(e){return console.log("error",e)}),t.addEventListener("abort",function(e){return console.log("abort",e)}),t.open("POST","/upload"),t.setRequestHeader("X-Upload-Length",this.selected_file.size),t.setRequestHeader("X-Token",this.token),t.send(e),this.start()):!1},e.prototype.file_selected=new g.Signal,e.prototype.uri_added=new g.Signal,e.prototype.cleared=new g.Signal,e.prototype.started=new g.Signal,e.prototype.stopped=new g.Signal,e.prototype.progress=new g.Signal,e.prototype.completed=new g.Signal,e.prototype.error=new g.Signal,e.supported=function(){return XMLHttpRequest?typeof FileList!="undefined"&&FileList!==null&&typeof FormData!="undefined"&&FormData!==null&&(new XMLHttpRequest).upload!=null:!1},e}(),g=e("signals"),i=function(){function e(e,t){this.name=t||"Anonymous",this.socket=e,this.build(),this.attach_events()}return e.prototype.build=function(){var e=this;return this.node=document.createElement("div"),this.node.id="entry_form",this.name_section=document.createElement("div"),this.name_section.className="name section",this.node.appendChild(this.name_section),this.name_input=document.createElement("input"),this.name_input.type="text",this.name_input.value=this.name,this.name_section.appendChild(this.name_input),this.message_section=document.createElement("div"),this.message_section.className="message section",this.node.appendChild(this.message_section),this.message_input=document.createElement("textarea"),this.message_section.appendChild(this.message_input),this.send_section=document.createElement("div"),this.send_section.className="send section",this.node.appendChild(this.send_section),this.send_button=document.createElement("button"),this.send_button.innerHTML="Send",this.send_section.appendChild(this.send_button),h.supported()&&(this.upload_section=document.createElement("div"),this.upload_section.className="upload section",this.uploader=new h(document.body,this.socket),this.upload_section.appendChild(this.uploader.node),this.uploader.uri_added.add(function(t){return e.message_input.value+=t}),this.message_section.appendChild(this.uploader.progress_bar),this.node.insertBefore(this.upload_section,this.message_section),this.select_file_section=this.uploader.select_button,this.node.insertBefore(this.select_file_section,this.send_section)),this.node},e.prototype.attach_events=function(){var e=this;this.message_input.addEventListener("keypress",function(t){return t.keyCode!==13||t.shiftKey?null:(t.preventDefault(),e.submit_message())}),this.send_button.addEventListener("click",function(){return e.submit_message()}),this.name_input.addEventListener("keypress",function(t){return t.keyCode===13?e.focus():setTimeout(function(){return e.change_name()},1)}),this.name_input.addEventListener("change",function(t){return e.change_name()});if(this.uploader)return this.uploader.file_selected.add(function(t){return e.upload_section.className+=" selected"}),this.uploader.cleared.add(function(){return e.upload_section.className=e.upload_section.className.split("selected").join("")}),this.uploader.started.add(function(){return e.disable()}),this.uploader.completed.add(function(){return e.enable()}),this.uploader.stopped.add(function(){return e.enable()}),this.uploader.error.add(function(){return e.enable()})},e.prototype.disable=function(){return this.disabled=!0,this.message_input.setAttribute("disabled","disabled"),this.send_button.setAttribute("disabled","disabled")},e.prototype.enable=function(){return this.disabled=!1,this.message_input.removeAttribute("disabled"),this.send_button.removeAttribute("disabled")},e.prototype.set_color=function(e){return this.color=e,this.name_input.style.backgroundColor="rgb("+e[0]+", "+e[1]+", "+e[2]+")"},e.prototype.set_token=function(e){this.token=e;if(this.uploader)return this.uploader.set_token(e)},e.prototype.focus=function(){return this.message_input.focus()},e.prototype.submit_message=function(){var e,t,n,r,i,s=this;if(this.disabled)return null;r=this.message_input.value,n=this.uploader&&this.uploader.selected_file,i=!!r.match(/[^\s]/);if(n)return this.uploader.upload(),e=function(n){return s.uploader.completed.remove(e),s.uploader.error.remove(t),s.perform_submit({image:n})},t=function(){return s.uploader.completed.remove(e),s.uploader.error.remove(t)},this.uploader.completed.add(e),this.uploader.error.add(t);if(i)return this.perform_submit()},e.prototype.perform_submit=function(e){return this.message_submitted.dispatch(this.message_input.value,e),this.message_input.value="",this.focus()},e.prototype.change_name=function(){var e,t;e=this.name_input.value,t=!!e.match(/[^\s]/);if(t)return this.name_changed.dispatch(this.name_input.value)},e.prototype.message_submitted=new g.Signal,e.prototype.name_changed=new g.Signal,e}(),r=function(){function e(e){this.set_src(e),this.build()}return e.prototype.src=null,e.prototype.node=null,e.prototype.play_btn=null,e.prototype.sound=null,e.sound_counter=0,e.prototype.set_src=function(e){this.src=e;if(e)return this.build_sound()},e.prototype.build=function(){var e=this;return this.node=document.createElement("div"),this.node.className="audio_player stop",this.play_btn=document.createElement("button"),this.play_btn.innerHTML="play",this.play_btn.className="play_btn",this.node.appendChild(this.play_btn),this.play_btn.addEventListener("click",function(){return e.play()}),this.stop_btn=document.createElement("button"),this.stop_btn.innerHTML="stop",this.stop_btn.className="stop_btn",this.node.appendChild(this.stop_btn),this.stop_btn.addEventListener("click",function(){return e.stop()}),this.progress_bar=document.createElement("progress"),this.progress_bar.setAttribute("max",1),this.progress_bar.setAttribute("value",0),this.node.appendChild(this.progress_bar),this.node},e.prototype.build_sound=function(){var t=this;return soundManager.enabled?this.sound=soundManager.createSound({id:"sound-"+e.sound_counter++,url:this.src,whileplaying:function(){return t.progress()},onload:function(){}}):soundManager.onready(function(){return t.build_sound()})},e.prototype.play=function(){if(this.sound)return this.sound.play()},e.prototype.stop=function(){return this.sound&&this.sound.stop(),this.progress_bar.setAttribute("value",0)},e.prototype.progress=function(){return this.progress_bar.setAttribute("max",this.sound.durationEstimate),this.progress_bar.setAttribute("value",this.sound.position)},e}(),b=e("tinycon/tinycon"),f=function(e){function t(e,t){this.filters_set=S(this.filters_set,this),this.socket=e,this.options=t,this.messages=[],this.messages_while_away=0,this.window_focused=!0,this.filter_pane=new s,this.build(),this.attach_events()}return E(t,e),t.prototype.window_focused=null,t.prototype.build=function(){var e;return this.node=document.createElement("div"),this.node.id="message_list",this.scroll_node=document.createElement("div"),this.scroll_node.className="scroller",this.list_node=document.createElement("ul"),this.list_node.className="messages",this.scroll_node.appendChild(this.list_node),this.node.appendChild(this.scroll_node),this.node.appendChild(this.filter_pane.node),this.resize(),this.lost_connection_node=document.createElement("li"),this.lost_connection_node.className="lost_connection",this.lost_connection_node.appendChild(document.createElement("div")),e=document.createElement("div"),this.lost_connection_node.appendChild(e),e.innerHTML="Your connection was lost.",this.remember_line=document.createElement("div"),this.remember_line.className="remember_line",this.remember_line.appendChild(document.createElement("div")),this.remember_line.appendChild(document.createElement("div")),this.remember_line.appendChild(document.createElement("div")),this.socket.emit("get_messages"),this.node},t.prototype.attach_events=function(){var e=this;return this.socket.on("messages",function(t){var n,r,i,s;s=t.reverse();for(r=0,i=s.length;r<i;r++)n=s[r],e.add_message(n);return e.messages_added(t)}),this.socket.on("connect",function(){if(e.lost_connection_node.parentNode)return e.list_node.removeChild(e.lost_connection_node)}),this.socket.on("disconnect",function(){return e.list_node.appendChild(e.lost_connection_node),e.scroll_bottom()}),window.addEventListener("resize",function(){return e.resize()}),u.item_loaded.add(function(){return e.scroll_bottom()}),this.filter_pane.changed.add(this.filters_set),this.is_hidden()&&this.place_remember_line(),this.scroll_node.addEventListener("scroll",function(t){return console.log(e.at_bottom())}),this.on_visibility_changed(function(t){return e.is_hidden(t)?e.blurred():e.focused()})},t.prototype.place_remember_line=function(){return this.list_node.appendChild(this.remember_line),this.scroll_bottom},t.prototype.check_remember_line=function(){var e,t;if(!this.remember_line.parentNode)return null;t=this.remember_line;while(t=t.nextSibling){e=window.getComputedStyle(t);if(e.display!=="none")return null}return this.list_node.removeChild(this.remember_line)},t.prototype.is_hidden=function(e){return e&&e.type==="blur"?this.window_focused=!1:e&&e.type==="focus"?this.window_focused=!0:this.visibility_support()&&(this.window_focused=!document[this.visibility_support()]),!this.window_focused},t.prototype.visibility_support=function(){var e,t,n,r;t="hidden msHidden mozHidden webkitHidden".split(" ");for(n=0,r=t.length;n<r;n++){e=t[n];if(document[e]!==void 0)return e}},t.prototype.on_visibility_changed=function(e){var t,n,r;return r=this.visibility_support(),n={hidden:"visibilitychange",msHidden:"msvisibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange"},t=n[r],t?document.addEventListener(t,e):(window.addEventListener("focus",function(){var t;return t=arguments,setTimeout(function(){return e.apply(null,t)},1)}),window.addEventListener("blur",function(){var t;return t=arguments,setTimeout(function(){return e.apply(null,t)},1)}))},t.prototype.add_message=function(e){var t;e.user_name=this.options.name,e=new a(e),this.messages[this.messages.length]=e,t=this.at_bottom(),this.list_node.appendChild(e.build()),e.filter(this.filter_pane.get_filters());if(t)return this.scroll_bottom()},t.prototype.messages_added=function(e){if(this.is_hidden())return this.messages_while_away+=e.length,b.setBubble(this.messages_while_away)},t.prototype.focused=function(){return this.messages_while_away=0,b.setBubble(0),this.check_remember_line()},t.prototype.blurred=function(){return this.place_remember_line()},t.prototype.resize=function(){return this.node.style.height=window.innerHeight-40+"px",this.scroll_bottom()},t.prototype.scroll_bottom=function(){return this.scroll_node.scrollTop=this.list_node.scrollHeight},t.prototype.at_bottom=function(){return this.scroll_node.scrollTop+this.scroll_node.offsetHeight===this.scroll_node.scrollHeight},t.prototype.filters_set=function(e){var t=this;return setTimeout(function(){var n,r,i,s;e.show_joinpart?t.add_class("show_joinpart"):t.remove_class("show_joinpart"),e.mediaonly?t.add_class("mediaonly"):t.remove_class("mediaonly"),s=t.messages;for(r=0,i=s.length;r<i;r++)n=s[r],n.filter(e);return t.scroll_bottom()},1)},t}(l),a=function(e){function t(e,t){return this.id=e.id,this.content=e.content,this.author_name=e.author_name,this.color=e.color,this.user_name=e.user_name,this.image=e.image,this.server_event=e.server_event,this.sent_at=e.sent_at?new Date(e.sent_at):new Date,this.socket=t,this.media=null,this.user_name!=null&&(this.reference_regex=new RegExp("@("+this.user_name+")")),this.reference=!1,this}return E(t,e),t.prototype.url_regex=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.\(\),@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/g,t.prototype.reference_regex=/\@(\w+)/,t.prototype.attributes=function(){return{id:this.id,content:this.content,author_name:this.author_name,color:this.color,image:this.image,sent_at:this.sent_at}},t.prototype.send=function(){return this.socket.emit("message",this.attributes()),this},t.prototype.build_content=function(){var e,t;t=this.content.match(this.url_regex),e=this.handle_reference(this.content),t?(e=this.content.replace(this.url_regex,"<a href='$&' target='_blank'>$&</a>","g"),this.content_node.innerHTML=e):this.content_node.innerHTML=this.content;if(this.image)return u.build(this.image,this);if(t)return u.build(t[0],this)},t.prototype.build=function(){var e;return this.node=document.createElement("li"),this.node.className="message",this.author_node=document.createElement("p"),this.author_node.className="author",this.author_node.innerHTML=this.author_name,this.color!=null&&(e="rgb("+this.color[0]+", "+this.color[1]+", "+this.color[2]+")",this.author_node.style.backgroundColor=e),this.node.appendChild(this.author_node),this.content_node=document.createElement("div"),this.content_node.className="content",this.node.appendChild(this.content_node),this.build_content(),this.time_node=document.createElement("div"),this.time_node.className="time",this.time_wrapper=document.createElement("span"),this.time_wrapper.className="time_wrapper",this.time_wrapper.appendChild(this.time_node),this.node.appendChild(this.time_wrapper),this.sent_at&&(this.time_node.innerHTML=this.format_date(this.sent_at)),this.is_joinpart()&&(this.node.className+=" joinpart"),this.reference&&(this.node.className+=" reference"),this.node},t.prototype.format_date=function(e){return e=(new Date(Date.parse(e.toString()))).toLocaleTimeString()},t.prototype.is_filtered=function(){return this.node.style.display!=="none"},t.prototype.set_media=function(e){this.media=e;if(this.has_media())return this.node.className+=" media"},t.prototype.handle_reference=function(e){return this.user_name==null?e:(e.match(this.reference_regex)&&(this.reference=!0),e)},t.prototype.hide=function(){return this.add_class("filtered")},t.prototype.show=function(){return this.remove_class("filtered")},t.prototype.is_joinpart=function(){return this.server_event},t.prototype.has_media=function(){return!!this.media},t.prototype.filter=function(e){var t,n,r,i;if(e.keywords){i=e.keywords;for(n=0,r=i.length;n<r;n++){t=i[n];if(this.content.indexOf(t)===-1)return this.hide()}}return this.show()},t.build=function(e,n,r,i){var s;return s=i&&i.image?i.image:null,new t({content:e,author_name:n.name,color:n.color,image:s},r)},t}(l)}).call(this)}),require("/lib/client/js/client.js")})();